{"ast":null,"code":"var _jsxFileName = \"/home/alvin/Documents/quicktask-frontend/src/pages/TaskList.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { getTasks } from \"../services/taskService\";\nimport supabase from \"../config/supabaseClient\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TaskList = () => {\n  _s();\n  const [tasks, setTasks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const fetchTasks = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await getTasks();\n      setTasks(data);\n    } catch (err) {\n      setError(\"Failed to fetch tasks. Please try again later.\");\n      console.error(\"Error fetching tasks:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchTasks();\n    const channel = supabase.channel(\"tasks-realtime\").on(\"postgres_changes\", {\n      event: \"*\",\n      schema: \"public\",\n      table: \"tasks\"\n    }, payload => {\n      if (!payload.new && !payload.old) return;\n      switch (payload.eventType) {\n        case \"INSERT\":\n          console.log(\"New task added:\", payload.new);\n          setTasks(prevTasks => [...prevTasks, payload.new]);\n          toast.success(`ðŸ†• New Task: ${payload.new.title}`, {\n            position: \"top-right\",\n            autoClose: 3000\n          });\n          break;\n        case \"UPDATE\":\n          console.log(\"Task updated:\", payload.new);\n          setTasks(prevTasks => prevTasks.map(task => task.id === payload.new.id ? payload.new : task));\n          toast.info(`âœï¸ Task Updated: ${payload.new.title}`);\n          break;\n        case \"DELETE\":\n          console.log(\"Task deleted:\", payload.old);\n          setTasks(prevTasks => prevTasks.filter(task => task.id !== payload.old.id));\n          toast.error(`ðŸ—‘ï¸ Task Removed`);\n          break;\n        default:\n          break;\n      }\n    }).subscribe();\n    return () => {\n      channel.unsubscribe();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 max-w-3xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold text-center mb-6\",\n      children: \"Available Tasks\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-gray-500\",\n      children: \"Loading tasks...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-500\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: fetchTasks,\n        className: \"mt-3 px-4 py-2 bg-blue-600 text-white rounded-md shadow-md hover:bg-blue-700\",\n        children: \"Retry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this), !loading && !error && tasks.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-center text-gray-500\",\n      children: \"No tasks available.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this), !loading && !error && tasks.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"space-y-4\",\n      children: tasks.map(task => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"border rounded-lg p-4 shadow-md bg-white\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold\",\n          children: task.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-700\",\n          children: task.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-blue-600 font-medium mt-2\",\n          children: [\"Budget: $\", task.budget]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 15\n        }, this)]\n      }, task.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n_s(TaskList, \"qwRs5Xd4E7WtXCZK9zh6nomhOw4=\");\n_c = TaskList;\nexport default TaskList;\nvar _c;\n$RefreshReg$(_c, \"TaskList\");","map":{"version":3,"names":["useEffect","useState","getTasks","supabase","toast","jsxDEV","_jsxDEV","TaskList","_s","tasks","setTasks","loading","setLoading","error","setError","fetchTasks","data","err","console","channel","on","event","schema","table","payload","new","old","eventType","log","prevTasks","success","title","position","autoClose","map","task","id","info","filter","subscribe","unsubscribe","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","length","description","budget","_c","$RefreshReg$"],"sources":["/home/alvin/Documents/quicktask-frontend/src/pages/TaskList.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { getTasks } from \"../services/taskService\"; \nimport supabase from \"../config/supabaseClient\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\n\nconst TaskList = () => {\n  const [tasks, setTasks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  const fetchTasks = async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const data = await getTasks();\n      setTasks(data);\n    } catch (err) {\n      setError(\"Failed to fetch tasks. Please try again later.\");\n      console.error(\"Error fetching tasks:\", err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchTasks();\n\n    const channel = supabase\n      .channel(\"tasks-realtime\")\n      .on(\n        \"postgres_changes\",\n        { event: \"*\", schema: \"public\", table: \"tasks\" },\n        (payload) => {\n          if (!payload.new && !payload.old) return;\n\n          switch (payload.eventType) {\n            case \"INSERT\":\n              console.log(\"New task added:\", payload.new);\n              setTasks((prevTasks) => [...prevTasks, payload.new]);\n              toast.success(`ðŸ†• New Task: ${payload.new.title}`, { position: \"top-right\", autoClose: 3000 });\n              break;\n\n            case \"UPDATE\":\n              console.log(\"Task updated:\", payload.new);\n              setTasks((prevTasks) =>\n                prevTasks.map((task) => (task.id === payload.new.id ? payload.new : task))\n              );\n              toast.info(`âœï¸ Task Updated: ${payload.new.title}`);\n              break;\n\n            case \"DELETE\":\n              console.log(\"Task deleted:\", payload.old);\n              setTasks((prevTasks) =>\n                prevTasks.filter((task) => task.id !== payload.old.id)\n              );\n              toast.error(`ðŸ—‘ï¸ Task Removed`);\n              break;\n\n            default:\n              break;\n          }\n        }\n      )\n      .subscribe();\n\n    return () => {\n      channel.unsubscribe();\n    };\n  }, []);\n\n  return (\n    <div className=\"p-6 max-w-3xl mx-auto\">\n      <h2 className=\"text-3xl font-bold text-center mb-6\">Available Tasks</h2>\n\n      {loading && <p className=\"text-center text-gray-500\">Loading tasks...</p>}\n\n      {error && (\n        <div className=\"text-center\">\n          <p className=\"text-red-500\">{error}</p>\n          <button \n            onClick={fetchTasks} \n            className=\"mt-3 px-4 py-2 bg-blue-600 text-white rounded-md shadow-md hover:bg-blue-700\"\n          >\n            Retry\n          </button>\n        </div>\n      )}\n\n      {!loading && !error && tasks.length === 0 && (\n        <p className=\"text-center text-gray-500\">No tasks available.</p>\n      )}\n\n      {!loading && !error && tasks.length > 0 && (\n        <ul className=\"space-y-4\">\n          {tasks.map((task) => (\n            <li key={task.id} className=\"border rounded-lg p-4 shadow-md bg-white\">\n              <h3 className=\"text-lg font-semibold\">{task.title}</h3>\n              <p className=\"text-gray-700\">{task.description}</p>\n              <p className=\"text-blue-600 font-medium mt-2\">Budget: ${task.budget}</p>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default TaskList;\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,QAAQ,QAAQ,yBAAyB;AAClD,OAAOC,QAAQ,MAAM,0BAA0B;AAC/C,SAASC,KAAK,QAAQ,gBAAgB;AACtC,OAAO,uCAAuC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,MAAMC,QAAQ,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACrB,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACU,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACY,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAMc,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7BH,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,IAAI,CAAC;IACd,IAAI;MACF,MAAME,IAAI,GAAG,MAAMd,QAAQ,CAAC,CAAC;MAC7BQ,QAAQ,CAACM,IAAI,CAAC;IAChB,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZH,QAAQ,CAAC,gDAAgD,CAAC;MAC1DI,OAAO,CAACL,KAAK,CAAC,uBAAuB,EAAEI,GAAG,CAAC;IAC7C,CAAC,SAAS;MACRL,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAEDZ,SAAS,CAAC,MAAM;IACde,UAAU,CAAC,CAAC;IAEZ,MAAMI,OAAO,GAAGhB,QAAQ,CACrBgB,OAAO,CAAC,gBAAgB,CAAC,CACzBC,EAAE,CACD,kBAAkB,EAClB;MAAEC,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE,QAAQ;MAAEC,KAAK,EAAE;IAAQ,CAAC,EAC/CC,OAAO,IAAK;MACX,IAAI,CAACA,OAAO,CAACC,GAAG,IAAI,CAACD,OAAO,CAACE,GAAG,EAAE;MAElC,QAAQF,OAAO,CAACG,SAAS;QACvB,KAAK,QAAQ;UACXT,OAAO,CAACU,GAAG,CAAC,iBAAiB,EAAEJ,OAAO,CAACC,GAAG,CAAC;UAC3Cf,QAAQ,CAAEmB,SAAS,IAAK,CAAC,GAAGA,SAAS,EAAEL,OAAO,CAACC,GAAG,CAAC,CAAC;UACpDrB,KAAK,CAAC0B,OAAO,CAAC,gBAAgBN,OAAO,CAACC,GAAG,CAACM,KAAK,EAAE,EAAE;YAAEC,QAAQ,EAAE,WAAW;YAAEC,SAAS,EAAE;UAAK,CAAC,CAAC;UAC9F;QAEF,KAAK,QAAQ;UACXf,OAAO,CAACU,GAAG,CAAC,eAAe,EAAEJ,OAAO,CAACC,GAAG,CAAC;UACzCf,QAAQ,CAAEmB,SAAS,IACjBA,SAAS,CAACK,GAAG,CAAEC,IAAI,IAAMA,IAAI,CAACC,EAAE,KAAKZ,OAAO,CAACC,GAAG,CAACW,EAAE,GAAGZ,OAAO,CAACC,GAAG,GAAGU,IAAK,CAC3E,CAAC;UACD/B,KAAK,CAACiC,IAAI,CAAC,oBAAoBb,OAAO,CAACC,GAAG,CAACM,KAAK,EAAE,CAAC;UACnD;QAEF,KAAK,QAAQ;UACXb,OAAO,CAACU,GAAG,CAAC,eAAe,EAAEJ,OAAO,CAACE,GAAG,CAAC;UACzChB,QAAQ,CAAEmB,SAAS,IACjBA,SAAS,CAACS,MAAM,CAAEH,IAAI,IAAKA,IAAI,CAACC,EAAE,KAAKZ,OAAO,CAACE,GAAG,CAACU,EAAE,CACvD,CAAC;UACDhC,KAAK,CAACS,KAAK,CAAC,kBAAkB,CAAC;UAC/B;QAEF;UACE;MACJ;IACF,CACF,CAAC,CACA0B,SAAS,CAAC,CAAC;IAEd,OAAO,MAAM;MACXpB,OAAO,CAACqB,WAAW,CAAC,CAAC;IACvB,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,oBACElC,OAAA;IAAKmC,SAAS,EAAC,uBAAuB;IAAAC,QAAA,gBACpCpC,OAAA;MAAImC,SAAS,EAAC,qCAAqC;MAAAC,QAAA,EAAC;IAAe;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EAEvEnC,OAAO,iBAAIL,OAAA;MAAGmC,SAAS,EAAC,2BAA2B;MAAAC,QAAA,EAAC;IAAgB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,EAExEjC,KAAK,iBACJP,OAAA;MAAKmC,SAAS,EAAC,aAAa;MAAAC,QAAA,gBAC1BpC,OAAA;QAAGmC,SAAS,EAAC,cAAc;QAAAC,QAAA,EAAE7B;MAAK;QAAA8B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACvCxC,OAAA;QACEyC,OAAO,EAAEhC,UAAW;QACpB0B,SAAS,EAAC,8EAA8E;QAAAC,QAAA,EACzF;MAED;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CACN,EAEA,CAACnC,OAAO,IAAI,CAACE,KAAK,IAAIJ,KAAK,CAACuC,MAAM,KAAK,CAAC,iBACvC1C,OAAA;MAAGmC,SAAS,EAAC,2BAA2B;MAAAC,QAAA,EAAC;IAAmB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAChE,EAEA,CAACnC,OAAO,IAAI,CAACE,KAAK,IAAIJ,KAAK,CAACuC,MAAM,GAAG,CAAC,iBACrC1C,OAAA;MAAImC,SAAS,EAAC,WAAW;MAAAC,QAAA,EACtBjC,KAAK,CAACyB,GAAG,CAAEC,IAAI,iBACd7B,OAAA;QAAkBmC,SAAS,EAAC,0CAA0C;QAAAC,QAAA,gBACpEpC,OAAA;UAAImC,SAAS,EAAC,uBAAuB;UAAAC,QAAA,EAAEP,IAAI,CAACJ;QAAK;UAAAY,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACvDxC,OAAA;UAAGmC,SAAS,EAAC,eAAe;UAAAC,QAAA,EAAEP,IAAI,CAACc;QAAW;UAAAN,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACnDxC,OAAA;UAAGmC,SAAS,EAAC,gCAAgC;UAAAC,QAAA,GAAC,WAAS,EAACP,IAAI,CAACe,MAAM;QAAA;UAAAP,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA,GAHjEX,IAAI,CAACC,EAAE;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAIZ,CACL;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACA,CACL;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAACtC,EAAA,CApGID,QAAQ;AAAA4C,EAAA,GAAR5C,QAAQ;AAsGd,eAAeA,QAAQ;AAAC,IAAA4C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}